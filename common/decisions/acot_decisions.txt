##########################################################################
# Decisions
##########################################################################

######################## UPGRADE DECISION ######################## 

# Create Awesome Palace
decision_transform_into_awesome = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_palace"
	}

	resources = {
		category = decisions
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
			minerals = 500
			influence = 10
			sr_dark_matter = 50
			acot_sr_dark_energy = 50
		}
	}
	
	potential = {
		owner = { 
			is_regular_empire = yes 
			has_technology = tech_dm_ancient_palace
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_colony_shelter
				 }
				 remove_building = building_colony_shelter
			}
			if = {
				limit = {
					has_building = building_capital
				 }
				 remove_building = building_capital
			}
			if = {
				limit = {
					has_building = building_major_capital
				 }
				 remove_building = building_major_capital		
			}
			if = {
				limit = {
					has_building = building_system_capital
				 }
				 remove_building = building_system_capital	
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_palace	
		}


	}
	
	ai_weight = {
		weight = 10000
	}
}


# Create Awesome Nexus
decision_transform_into_awesome_machine = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_control_center"
	}

	resources = {
		category = decisions
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
			minerals = 500
			influence = 10
			sr_dark_matter = 50
			acot_sr_dark_energy = 50
		}
	}
	
	potential = {
		owner = { 
			is_machine_empire = yes 
			has_technology = tech_dm_ancient_control_center
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_deployment_post
				 }
				 remove_building = building_deployment_post
			}
			if = {
				limit = {
					has_building = building_machine_capital
				 }
				 remove_building = building_machine_capital
			}
			if = {
				limit = {
					has_building = building_machine_major_capital
				 }
				 remove_building = building_machine_major_capital			
			}
			if = {
				limit = {
					has_building = building_machine_system_capital
				 }
				 remove_building = building_machine_system_capital			
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_control_center				
		}


	}
	
	ai_weight = {
		weight = 10000
	}
}

# Create Awesome Nexus
decision_transform_into_awesome_hive = {
	owned_planets_only = yes
	icon = decision_transform_into_awesome
	
	enactment_time = 1200
	prerequisites = {
		"tech_dm_ancient_hive_cluster"
	}

	resources = {
		category = decisions
		cost = {
			trigger = {
				owner = {
					is_ai = no
				}
			}
			minerals = 5000
			influence = 100
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
		cost = {
			trigger = {
				owner = {
					is_ai = yes
				}
			}
			minerals = 500
			influence = 10
			sr_dark_matter = 50
			acot_sr_dark_energy = 50
		}
	}
	
	potential = {
		owner = { 
			is_hive_empire = yes 
			has_technology = tech_dm_ancient_hive_cluster
		}
		NOR = { 
			has_building = building_dm_ancient_control_center
			has_building = building_dm_ancient_palace
			has_building = building_dm_ancient_hive_cluster
			has_building = building_ae_ancient_control_center
			has_building = building_ae_ancient_palace
			has_building = building_ae_ancient_hive_cluster
		}
	}
	
	allow = {
	}
	
	effect = {
		hidden_effect = {
			if = {
				limit = {
					has_building = building_colony_shelter
				 }
				 remove_building = building_colony_shelter		
			}
			if = {
				limit = {
					has_building = building_hive_capital
				 }
				 remove_building = building_hive_capital		
			}
			if = {
				limit = {
					has_building = building_hive_major_capital
				 }
				 remove_building = building_hive_major_capital		
			}
			if = {
				limit = {
					has_building = building_hab_capital
				 }
				 remove_building = building_hab_capital
			}		
			if = {
				limit = {
					has_building = building_hab_major_capital
				 }
				 remove_building = building_hab_major_capital		
			}	

			if = {
				limit = {
					has_building = building_resort_capital
				 }
				 remove_building = building_resort_capital		
			}	
			if = {
				limit = {
					has_building = building_resort_major_capital
				 }
				 remove_building = building_resort_major_capital		
			}				

			if = {
				limit = {
					has_building = building_slave_capital
				 }
				 remove_building = building_slave_capital		
			}	
			if = {
				limit = {
					has_building = building_slave_major_capital
				 }
				 remove_building = building_slave_major_capital		
			}		

			if = {
				limit = {
					has_building = building_ancient_palace
				 }
				 remove_building = building_ancient_palace		
			}	

			if = {
				limit = {
					has_building = building_ancient_control_center
				 }
				 
				 remove_building = building_ancient_control_center	
			}

			add_building = building_dm_ancient_hive_cluster	
		}


	}
	
	ai_weight = {
		weight = 10000
	}
}

######################## ASCENSION UPGRADE DECISION ######################## 

decision_upgrade_gen_growth = {
	owned_planets_only = yes
	icon = decision_microscopic_life
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_clone_vats
		NOT = { has_modifier = acot_modifier_upgrade_gen_growth }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_gen_growth } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_gen_adapt = {
	owned_planets_only = yes
	icon = decision_microscopic_life
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_clone_vats
		NOT = { has_modifier = acot_modifier_upgrade_gen_adapt }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_gen_adapt } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_synth_extra_space = {
	owned_planets_only = yes
	icon = decision_cybernetics
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_synt_center
		NOT = { has_modifier = acot_modifier_upgrade_synth_extra_space }
	}
	
	effect = { 
		IF = { limit = { is_ringworld = no } add_modifier = { modifier = acot_modifier_upgrade_synth_extra_space } }
		IF = { limit = { is_ringworld = yes } add_modifier = { modifier = acot_modifier_upgrade_synth_extra_space_ringworld } }
	}
	
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_synth_assemble = {
	owned_planets_only = yes
	icon = decision_cybernetics
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_synt_center
		NOT = { has_modifier = acot_modifier_upgrade_synth_assemble }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_synth_assemble } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_psi_manipulate = {
	owned_planets_only = yes
	icon = decision_wormhole
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			unity = 5000
		}	
	}
	
	potential = {
		has_building = building_ae_psi_altar
		NOT = { has_modifier = acot_modifier_upgrade_psi_manipulate }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_psi_manipulate } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_psi_telekinesis = {
	owned_planets_only = yes
	icon = decision_wormhole
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			energy = 5000
			unity = 5000
		}	
	}
	
	potential = {
		has_building = building_ae_psi_altar
		NOT = { has_modifier = acot_modifier_upgrade_psi_telekinesis }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_psi_telekinesis } }
	
	ai_weight = {
		weight = 100
	}
}


decision_upgrade_hive_harvest = {
	owned_planets_only = yes
	icon = decision_divine_algorithm
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			food = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_hive_evochamber
		NOT = { has_modifier = acot_modifier_upgrade_hive_harvest }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_hive_harvest } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_hive_growth = {
	owned_planets_only = yes
	icon = decision_divine_algorithm
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			food = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_hive_evochamber
		NOT = { has_modifier = acot_modifier_upgrade_hive_growth }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_hive_growth } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_machine_cyberspace = {
	owned_planets_only = yes
	icon = decision_glitchy_matrix
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_machine_dome
		NOT = { has_modifier = acot_modifier_upgrade_machine_cyberspace }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_machine_cyberspace } }
	
	ai_weight = {
		weight = 100
	}
}

decision_upgrade_machine_upkeep = {
	owned_planets_only = yes
	icon = decision_glitchy_matrix
	
	enactment_time = 360

	resources = {
		category = decisions
		cost = {
			minerals = 5000
			sr_dark_matter = 500
			acot_sr_dark_energy = 500
		}	
	}
	
	potential = {
		has_building = building_ae_machine_dome
		NOT = { has_modifier = acot_modifier_upgrade_machine_upkeep }
	}
	
	effect = { add_modifier = { modifier = acot_modifier_upgrade_machine_upkeep } }
	
	ai_weight = {
		weight = 100
	}
}


######################## SPECIAL BUILDING MENU ######################## 


decision_open_chambers_menu = {
	owned_planets_only = yes
	icon = decision_machine_sapience
	

	potential = {
		OR = {
			has_building = building_ae_clone_vats	
			has_building = building_ae_hive_evochamber	
		}	
	}
	
	allow = {
		OR = {
			has_building = building_ae_clone_vats	
			has_building = building_ae_hive_evochamber	
		}
	}
	
	effect = {
		owner = {
			country_event = {
				id = acot_special_menu.3
			}
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			owner = {
				resource_stockpile_compare = {
					resource = influence
					value <= 150		
				}
			}
		}
	}
}

# Chamber Menu
decision_open_assembly_menu = {
	owned_planets_only = yes
	icon = decision_machine_sapience


	potential = {
		OR = {
			has_building = building_ae_machine_dome	
			has_building = building_ae_synt_center
		}		
	}
	
	allow = {
		OR = {
			has_building = building_ae_machine_dome	
			has_building = building_ae_synt_center
		}
	}
	
	effect = {
		owner = {
			country_event = {
				id = acot_special_menu.4
			}
		}
	}
	
	ai_weight = {
		weight = 10
		modifier = {
			factor = 0
			owner = {
				resource_stockpile_compare = {
					resource = influence
					value <= 150		
				}
			}
		}
	}
}

######################## STANDARD DECISIONS ######################## 

decision_acot_automated_building = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}

	prerequisites = {
		tech_acot_automated_systems
	}
	
	potential = {
		OR = {
			has_enigmatic_capital = yes
			has_ascended_capital = yes
		}
		NOT = { has_modifier = acot_modifier_ascended_city }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_ascended_city" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_automated_building = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_ascended_city
	}
	
	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_ascended_city
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

########################

decision_acot_supercharged_reactor = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		OR = {
			has_building = building_ae_dark_matter_generator
			has_building = building_dark_matter_generator
		}		
	}

	prerequisites = {
		tech_acot_supercharged_reactor
	}

	potential = {
		NOR = {
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
		}
		NOT = { has_modifier = acot_modifier_supercharged_reactor }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_supercharged_reactor" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_supercharged_reactor = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_supercharged_reactor
	}
	
	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_supercharged_reactor
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

########################

decision_acot_supercharged_pylon = {
	owned_planets_only = yes
	sound = event_laboratory_sound

	resources = {
		category = decisions
		cost = {
		}
	}
	
	prerequisites = {
		tech_acot_supercharged_pylon
	}

	allow = {
		OR = {
			has_building = building_ae_dark_energy_pylon
			has_building = building_dark_energy_pylon
		}		
	}

	potential = {
		NOR = {
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
		}
		NOT = { has_modifier = acot_modifier_supercharged_pylon }
	}
	
	effect = {
		hidden_effect = {
			add_modifier = { modifier = "acot_modifier_supercharged_pylon" days = -1 }
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

decision_acot_end_supercharged_pylon = {
	owned_planets_only = yes
	sound = event_administrative_work

	resources = {
		category = decisions
	}
	
	potential = {
		#owner = { is_regular_empire = yes } #if you conquer the planet as a different type you need to be able to disable it
		has_modifier = acot_modifier_supercharged_pylon
	}
	
	effect = {
		hidden_effect = {
			remove_modifier = acot_modifier_supercharged_pylon
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

######################## KILLING VOID ENEMIES ########################

decision_acot_kill_void_mutant = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_mutants
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_mutant_purge
			while = {
				count = 120
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_mutants_army
				}
			}
			random_list = {
				50 = {
					while = {
						count = 60
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_mutants_army
						}
					}
				}
				50 = {
					while = {
						count = 6
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_mutants_hero
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_lifeform = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = this
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_lifeforms
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_fiend_purge
			while = {
				count = 80
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_fiends_army
				}
			}
			random_list = {
				50 = {
					while = {
						count = 40
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_fiends_army
						}
					}
				}
				50 = {
					while = {
						count = 4
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_fiends_hero
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_machine = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_machines
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_machine_purge
			while = {
				count = 160
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_machine_army
				}
			}
			random_list = {
				50 = {
					while = {
						count = 80
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_machine_army
						}
					}
				}
				50 = {
					while = {
						count = 8
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_machine_hero
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_crystal = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_sentient_crystal
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_crystal_purge
			while = {
				count = 60
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_crystal_army
				}
			}
			random_list = {
				50 = {
					while = {
						count = 30
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_crystal_army
						}
					}
				}
				50 = {
					while = {
						count = 3
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_crystal_hero
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

decision_acot_kill_void_flora = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}		
	}

	potential = {
		has_modifier = acot_modifier_fractured_plants
		NOR = {
			has_planet_flag = ongoing_void_mutant_purge
			has_planet_flag = ongoing_void_machine_purge
			has_planet_flag = ongoing_void_crystal_purge
			has_planet_flag = ongoing_void_fiend_purge
			has_planet_flag = ongoing_void_plant_purge
		}
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_void_plant_purge
			while = {
				count = 60
				create_army = {
					owner = event_target:lifeform_country
					type = acot_void_plant_army
				}
			}
			random_list = {
				50 = {
					while = {
						count = 30
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_plant_army
						}
					}
				}
				50 = {
					while = {
						count = 3
						create_army = {
							owner = event_target:lifeform_country
							type = acot_void_plant_hero
						}
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 1
	}
}

######################## VOID SPHERE CREATION ######################## 

decision_transform_into_super_awesome = {
	owned_planets_only = yes
	sound = choose_ascension_perk_01

	resources = {
		category = decisions
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured_ae				
			}
			energy = 250000
			minerals = 250000
			alloys = 125000
			acot_sr_dark_energy = 5000
			sr_dark_matter = 5000
			influence = 250
		}
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured		
			}
			energy = 1000000
			minerals = 1000000
			alloys = 500000
			acot_sr_dark_energy = 20000
			sr_dark_matter = 20000
			influence = 250
		}
	}
	
	allow = {
		NOR = {
			has_modifier = acot_modifier_fractured_lifeforms
			has_modifier = acot_modifier_fractured_machines
			has_modifier = acot_modifier_fractured_mutants
			has_modifier = acot_modifier_fractured_plants
			has_modifier = acot_modifier_fractured_sentient_crystal
		}		
		NOR = {
			has_deposit = d_acot_void_chasm
			has_deposit = d_acot_void_terrain
			has_deposit = d_acot_void_rift
		}
	}

	prerequisites = {
		tech_acot_create_enigmapolis
	}

	potential = {
		OR = {
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_dark_fractured
		}
		NOT = {
			has_planet_flag = has_enigmapolis_project
		}
	}
	
	effect = {
		set_planet_flag = has_megastructure
		set_planet_flag = has_enigmapolis_project
		planet_event = { id = acot_planets.4 }
		enable_special_project = {
			name = ACOT_CREATE_ENIGMAPOLIS
			location = THIS
		}
	}
	
	ai_weight = {
		weight = 0
	}
}

######################## Blow uo shups ######################## 

# Blow Up to Fractured World
decision_fractured_self_detonation = {
	icon = decision_planet_beam
	resources = {
		category = decisions
		cost = {
			influence = 250
		}
		cost = {
			trigger = {
				exists = owner
				owner = { is_same_value = root.owner }
			}
			influence = 500
			unity = 50000
		}
		cost = {
			trigger = {
				NOT = {
					owner = { is_same_value = root.owner }
				}
			}
			influence = 250
		}
	}
	sound = event_ai_started_01
	potential = {
		exists = space_owner
		space_owner = { is_same_value = from }
		from = {
			has_technology = tech_bombardment_ae_final
		}
		is_star = no
		is_ringworld = no
		is_moon = no
		habitable_structure = no
		OR = {
			habitable_planet = yes
			is_planet_class = pc_molten
			is_planet_class = pc_toxic
			is_planet_class = pc_barren
			is_planet_class = pc_barren_cold
			is_planet_class = pc_dark_fractured
			is_planet_class = pc_nuked
			is_planet_class = pc_hive
			is_planet_class = pc_machine
			is_planet_class = pc_city
		}
		NOR = {
			is_planet_class = pc_dark_fractured_ae
			is_planet_class = pc_acot_enigmopolis
			is_planet_class = pc_acot_pmc_vault
		}
		NOT = {
			has_planet_flag = final_word_underway
		}
	}

	allow = {
	}

	effect = {
		# determine quality tier, set variable
		hidden_effect = {
			set_planet_flag = final_word_underway
			save_event_target_as = showered_planet
			space_owner = {
				enable_special_project = {
					name = ACOT_FINAL_WORD_PLANET
					location = event_target:showered_planet
				}					
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Stablize World
decision_fractured_stablize = {
	icon = decision_planet_beam
	resources = {
		category = decisions
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured_unstable				
			}
			energy = 10000
			sr_dark_matter = 1000
			acot_sr_dark_energy = 1000
		}
		cost = {
			trigger = {
				is_planet_class = pc_dark_fractured_ae_unstable				
			}
			energy = 50000
			sr_dark_matter = 5000
			acot_sr_dark_energy = 5000
		}
	}
	sound = event_yellow_alert_01

	potential = {
		exists = space_owner
		space_owner = { is_same_value = from }
		OR = {
			is_planet_class = pc_dark_fractured_unstable
			is_planet_class = pc_dark_fractured_ae_unstable
		}
		NOT = {
			has_planet_flag = destablize_underway	
		}
	}

	allow = {
	}

	effect = {
		# determine quality tier, set variable
		hidden_effect = {
			set_planet_flag = destablize_underway
			space_owner = {
				enable_special_project = {
					name = ACOT_STABLIZE_PLANET
					location = root
				}					
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

# Blow Up to Fractured World
decision_stellarite_reactor_detonation = {
	icon = decision_shattered_planet
	enactment_time = 10
	resources = {
		category = decisions
		cost = {
			acot_sr_stellarite = 1000
			influence = 500
			unity = 50000
		}
	}
	sound = event_red_alert

	owned_planets_only = yes

	potential = {
		exists = owner
		owner = { is_same_value = root.owner }
		from = {
			has_technology = tech_bombardment_se
		}
		is_star = no
		habitable_structure = no
		NOR = {
			is_planet_class = pc_acot_enigmopolis
		}
	}

	allow = {
		OR = {
			has_building = building_stellarite_generator
			has_building = building_stellarite_generator_ae
			has_building = building_stellarite_nexus
		}
	}

	effect = {
		custom_tooltip = decision_stellarite_reactor_detonation_effect
		# determine quality tier, set variable
		hidden_effect = {
			######### STELLARITE NORMAL
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator
						value = 1
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 10000
					}				
				}
			}
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator
						value = 2
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 20000
					}				
				}
			}
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator
						value >= 3
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 30000
					}				
				}
			}
			######### STELLARITE UPGRADED
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator_ae
						value = 1
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 20000
					}				
				}
			}
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator_ae
						value = 2
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 40000
					}				
				}
			}
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_generator_ae
						value >= 3
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 60000
					}				
				}
			}			
			######### STELLARITE NEXUS
			if = {
				limit = {
					num_buildings = {
						type = building_stellarite_nexus
						value >= 1
					}
				}
				solar_system = {
					save_event_target_as = imminent_bombing
					every_ship = {
						limit = {
							fleet = {
								solar_system = {
									is_same_value = event_target:imminent_bombing
								}
							}
						}
						reduce_hp = 40000
					}				
				}
			}	
			every_owned_pop = {
				kill_pop = yes
			}
			remove_all_buildings = yes
			reroll_deposits = yes
			destroy_colony = yes
			reset_planet = yes
			clear_planet_modifiers = yes
			if = {
				limit = {
					habitable_planet = yes
				}
				change_pc = pc_shattered
			}
		}
	}

	ai_weight = {
		weight = 0
	}
}

################## PHANON INFILTRATION

decision_acot_infiltrate_phanon_grid = {
	owned_planets_only = yes
	sound = event_ground_battle

	resources = {
		category = decisions
		cost = {
		}
	}
	
	allow = {
		any_planet_army = {
			owner = {
				is_same_value = root.owner
			}
		}	
		NOT = {
			has_modifier = acot_modifier_vault_delay
		}
		num_free_districts = {
			type = district_acot_phanon_vault
			value = 0
		}
		num_free_districts = {
			type = district_acot_phanon_command
			value = 0
		}
		num_free_districts = {
			type = district_acot_phanon_data
			value = 0
		}	
	}

	potential = {
		owner = {
			is_ai = no			
		}
		OR = {
			is_planet_class = pc_acot_pmc_vault
			is_same_value = event_target:acot_phanon_vault
		}
		has_ground_combat = no
	}
	
	effect = {
		hidden_effect = {
			set_planet_flag = ongoing_vault_infiltration
			add_modifier = {
				modifier = acot_modifier_vault_delay
				days = 180
			}
			random_list = {
				50 = {
					while = {
						count = 60
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_soldier
						}
					}
					while = {
						count = 30
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_elite
						}
					}
					while = {
						count = 20
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_psi
						}
					}
					while = {
						count = 1
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_commander
						}
					}
				}
				50 = {
					while = {
						count = 60
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_droid
						}
					}
					while = {
						count = 30
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_droid_commando
						}
					}
					while = {
						count = 20
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_droid_shielder
						}
					}
					while = {
						count = 1
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_droid_commander
						}
					}
				}
			}
			random_list = {
				50 = {
					while = {
						count = 20
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_attack_dog
						}
					}
				}
				50 = {
				}
			}
			random_list = {
				50 = {
					while = {
						count = 30
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_turret
						}
					}
				}
				50 = {
				}
			}
			random_list = {
				50 = {
					while = {
						count = 20
						create_army = {
							owner = event_target:phanon_security
							type = acot_phanon_defense_trap
						}
					}
				}
				50 = {
				}
			}
			random_list = {
				80 = {
				}
				20 = {
					set_planet_flag = has_phanon_operative
					create_army = {
						owner = event_target:phanon_security
						type = acot_phanon_defense_operative
					}
				}
			}
		}
	}
	
	ai_weight = {
		weight = 0
	}
}


#################### JOBLEESS JOBOB

decision_give_foodman_job = {
	owned_planets_only = yes
	sound = event_cityscape
	icon = decision_expel_population

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_find_work
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_foodman }
	}
	
	effect = {
		custom_tooltip = decision_give_foodman_job_effect
		add_modifier = { modifier = "acot_modifier_free_foodman" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_thinker
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_give_soldier_job = {
	owned_planets_only = yes
	sound = event_cityscape
	icon = decision_smugglers_in_bar

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_find_work
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_soldier }
	}
	
	effect = {
		custom_tooltip = decision_give_soldier_job_effect
		add_modifier = { modifier = "acot_modifier_free_soldier" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_thinker
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_give_thinker_job = {
	owned_planets_only = yes
	sound = event_cityscape
	icon = decision_surreal_visions

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_find_work
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_thinker }
	}
	
	effect = {
		custom_tooltip = decision_give_thinker_job_effect
		add_modifier = { modifier = "acot_modifier_free_thinker" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_give_reserve_job = {
	owned_planets_only = yes
	sound = event_laboratory_sound
	icon = decision_galactic_senate

	resources = {
		category = decisions
		cost = {
			influence = 50
		}
	}
	
	prerequisites = {
		tech_go_sleep_machine
	}

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		NOT = { has_modifier = acot_modifier_free_stasis }
	}
	
	effect = {
		custom_tooltip = decision_give_thinker_job_effect
		add_modifier = { modifier = "acot_modifier_free_stasis" days = -1 }
		hidden_effect = {
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_thinker
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}

decision_ungive_job = {
	owned_planets_only = yes
	sound = event_default
	icon = decision_resources

	resources = {
		category = decisions
	}
	

	allow = {
		has_enigmatic_capital = yes	
	}

	potential = {
		OR = { 
			has_modifier = acot_modifier_free_foodman 
			has_modifier = acot_modifier_free_soldier 
			has_modifier = acot_modifier_free_thinker 
			has_modifier = acot_modifier_free_stasis 
		}
	}
	
	effect = {
		custom_tooltip = decision_ungive_job_effect
		hidden_effect = {
			remove_modifier = acot_modifier_free_foodman
			remove_modifier = acot_modifier_free_soldier
			remove_modifier = acot_modifier_free_thinker
			remove_modifier = acot_modifier_free_stasis
		}
	}
	
	ai_weight = {
		weight = 1
		modifier = {
			factor = 0
			OR = {
				has_modifier = acot_modifier_free_foodman
				has_modifier = acot_modifier_free_soldier
				has_modifier = acot_modifier_free_thinker
				has_modifier = acot_modifier_free_stasis
			}
		}
	}
}
