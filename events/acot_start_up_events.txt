namespace = acot_startup

event = {
	id = acot_startup.1
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		set_global_flag = acot_activated
		IF = {
			limit = {
				NOT = {
					exists = event_target:lifeform_country
				}				
			}
			create_country = {
				type = void_lifeforms_1
				name = "Void Lifeforms"
				flag = {
					icon = {
						category = "spherical"
						file = "flag_spherical_23.dds"
					}
					background= {
						category = "backgrounds"
						file = "v.dds"
					}
					colors={
						"black"
						"teal"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = lifeform_country	
					every_playable_country = {
						establish_communications_no_message = event_target:lifeform_country	
						set_faction_hostility = {
							target = event_target:lifeform_country		
							set_hostile = yes
						}					
					}			
				}
			}
		}
		create_species = {
			name = "Void Lifeforms"
			class = random_non_machine
			portrait = random
			traits = random
			effect = {
				save_event_target_as = void_lifeform_species
			}
		}
		IF = {
			limit = {
				NOT = {
					exists = event_target:phanon_security
				}				
			}
			create_country = {
				type = void_lifeforms_1
				name = "Phanon Security"
				flag = {
					background= {
						category = "backgrounds"
						file = "v.dds"
					}
					icon = {
						category = phanon
						file = flag_phanon.dds
					}
					colors={
						"red"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = phanon_security	
					every_playable_country = {
						establish_communications_no_message = event_target:phanon_security	
						set_faction_hostility = {
							target = event_target:phanon_security		
							set_hostile = yes
						}					
					}
					set_faction_hostility = {
						target = event_target:phanon_base_country
						set_friendly = yes
					}							
				}
			}
		}
		every_planet = {
			limit = {
				OR = {
					is_planet_class = pc_dark_fractured_ae
					is_planet_class = pc_dark_fractured
				}
			}
			set_planet_flag = can_have_precursor_event
			add_modifier = { modifier = acot_modifier_precursor_digsite }
			while = {
				count = 2
				random_list = {
					33 = {
						modifier = {
							factor = 0
							has_deposit = d_acot_void_chasm
						}
						add_deposit = d_acot_void_chasm
					}
					33 = {
						modifier = {
							factor = 0
							has_deposit = d_acot_void_rift
						}	
						add_deposit = d_acot_void_rift				
					}
					33 = {
						modifier = {
							factor = 0
							has_deposit = d_acot_void_terrain
						}
						add_deposit = d_acot_void_terrain					
					}
				}
			}
			while = {
				count = 3
				random_list = {
					20 = {
						if = {
							limit = { 
								NOT = {
									has_modifier = acot_modifier_fractured_mutants
								}
							}
							add_modifier = { modifier = acot_modifier_fractured_mutants days = -1 }
						}
					}
					20 = {
						if = {
							limit = { 
								NOT = {
									has_modifier = acot_modifier_fractured_lifeforms
								}
							}
							add_modifier = { modifier = acot_modifier_fractured_lifeforms days = -1 }
						}
					}
					20 = {
						if = {
							limit = { 
								NOT = {
									has_modifier = acot_modifier_fractured_sentient_crystal
								}
							}
							add_modifier = { modifier = acot_modifier_fractured_sentient_crystal days = -1 }
						}
					}
					20 = {
						if = {
							limit = { 
								NOT = {
									has_modifier = acot_modifier_fractured_machines
								}
							}
							add_modifier = { modifier = acot_modifier_fractured_machines days = -1 }
						}
					}
					20 = {
						if = {
							limit = { 
								NOT = {
									has_modifier = acot_modifier_fractured_plants
								}
							}
							add_modifier = { modifier = acot_modifier_fractured_plants days = -1 }
						}
					}
				}
			}
		}
		random_country = {
			limit = {
				is_country_type = acot_phanon_base
			}
			country_event = {
				id = acot_startup.2 days = 1
			}
		}
		IF = {
			limit = {
				NOT = {
					exists = event_target:acot_tier_3_dummy_country
				}
			}
			create_country = {
				name = "Tier 3 Country"
				type = acot_tier_3_country
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = acot_tier_3_dummy_country
				}
			}
		}
		IF = {
			limit = {
				NOT = {
					exists = event_target:acot_tier_5_dummy_country
				}
			}
			create_country = {
				name = "Tier 5 Country"
				type = acot_tier_5_country
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = acot_tier_5_dummy_country
				}
			}
		}
		IF = {
			limit = {
				NOT = {
					exists = event_target:acot_tier_dm_dummy_country
				}
			}
			create_country = {
				name = "Tier DM Country"
				type = acot_tier_dm_country
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"black"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					save_global_event_target_as = acot_tier_dm_dummy_country
				}
			}
		}
	}
}

### Reapplies Megastructurer Ownership
country_event = {
	id = acot_startup.2
	is_triggered_only = yes
	hide_window = yes

	immediate = {
		every_system = {
			limit = {
				has_star_flag = phanon_base_system
			}
			every_fleet_in_system = {
				limit = {
					is_ship_class = shipclass_starbase
				}
				set_owner = event_target:curator_enclave_country
			}
			every_fleet_in_system = {
				limit = {
					is_ship_class = shipclass_starbase
				}
				set_owner = event_target:phanon_base_country
			}
		}
	}
}

###############These sets of events are long and complicated because PDX has made life difficult for modders to make a proper custom-built starting systems with their copious and overuse of starting stuffs that tends to overwrite each and everything we have worked so hard for. Their empires must be purged.
#########To this end, we will moblize our fleets into two groups, the Meme Fleet and the Anti-Shitty Unmodded Stellaris Fleet. The meme fleet will meme lesser starting systems, the ASUS fleet will delete all useless and crappy tash-tier things meant for plebs from our destined fate.
country_event = {
	id = acot_startup.3
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	
	

	trigger = {
		any_country = {
			has_origin = origin_tier_three_start
		}
	}
	
	immediate = {
		every_country = {	
			IF = {
				limit = {
					has_origin = origin_tier_three_start
				}
			set_country_flag = tier_three_start
			set_country_flag = custom_start_screen
			add_resource = {
				minerals = 5000
				energy = 5000
				alloys = 2500
				food = 2500
				consumer_goods = 2500
				volatile_motes = 250
				rare_crystals = 250
				exotic_gases = 250			
				influence = 150
				unity = 10000
			}
			every_owned_leader = {
				add_skill = 2
			}
			copy_techs_from = {
				target = event_target:acot_tier_3_dummy_country
				except = {
					tech_akx_worm_1
					tech_akx_worm_2
					tech_akx_worm_3
					tech_psionic_theory
					tech_nanite_assemblers
					tech_nanite_repair_system
					tech_nanite_transmutation
					null_void_beam
					tech_acot_swarm_strike_craft
					tech_swarm_strike_craft_1
					tech_acot_scourge_missile
					tech_scourge_missile_1
					tech_acot_matter_disintegrator
					tech_extradimensional_weapon_1
					tech_energy_lance_edi
					tech_energy_lance_contingency
					tech_perdition_beam_contingency
				}
			}
			country_event = { id = acot_startup.301 days = 1 } #Overwrites other stupid stuffs that prevent our grand ascension.
			capital_scope = { 
				planet_event = { id = acot_startup.300 } 
				}
			}
		}	
	}
}

### SETUP PLANETS
planet_event = {
	id = acot_startup.300
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		clear_blockers = yes
		remove_all_buildings = yes
		prevent_anomaly = yes
		if = {
			limit = { owner = { is_regular_empire = yes } }
			# 3 jobs
			add_building = building_major_capital
			# 2 jobs
			add_building = building_bureaucratic_1
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			add_building = building_factory_1
			add_building = building_factory_1
			add_building = building_clinic
			# 4 jobs
			if = {
				limit = { owner = { is_megacorp = yes } }
				add_building = building_commercial_zone
			}
		}
		if = {
			limit = { owner = { is_hive_empire = yes } }
			# 5 jobs
			add_building = building_hive_major_capital
			add_building = building_hive_node
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			add_building = building_spawning_pool
			add_building = building_hive_warren
			add_building = building_hive_warren
		}

		# Replace capital building for machine empires
		if = {
			limit = { owner = { is_machine_empire = yes } }
			add_building = building_machine_major_capital
			add_building = building_machine_assembly_plant
			add_building = building_uplink_node
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			#Servitors
			if = {
				limit = { owner = { has_civic = civic_machine_servitor } }
				add_building = building_organic_sanctuary
			}
		}
		if = {
			limit = {
				is_capital = yes
			}
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			if = {
				limit = { owner = { has_authority = auth_machine_intelligence } }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
			}
			else_if = {
				limit = { owner = { has_authority = auth_hive_mind } }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
			}
			else = {
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
			}
			if = {
				limit = {
					owner = { NOT = { has_authority = auth_machine_intelligence } }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
			}
			if = {
				limit = {
					owner = { has_authority = auth_machine_intelligence }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
			}
			if = {
				limit = { owner = { is_gestalt = no } }
				add_building = building_factory_1
				add_building = building_commercial_zone
			}
			while = {
				count = 30
				create_pop = { species = owner_main_species }
			}
		}	
	}
}

country_event = {
	id = acot_startup.301
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_owned_fleet = {
			limit = {
				is_ship_class = shipclass_military
			}
			delete_fleet = this				
		}	
		capital_scope = {
			owner = {
				create_leader = {
					class = admiral
					skill = 3
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					assign_leader = last_created_leader
					while = {
						count = 8
						create_ship = {
							name = random
							random_existing_design = corvette
						}
					}
					while = {
						count = 2
						create_ship = {
							name = random
							random_existing_design = destroyer
						}
					}
					assign_leader = last_created_leader
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 3
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 50
						angle = random 
					}
					assign_leader = last_created_leader		
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 3
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 55
						angle = random 
					}	
					assign_leader = last_created_leader				
				}
			}
			solar_system = {
				every_neighbor_system = {
					limit = {
						NOT = {
							is_same_value = capital_star
						}
					}
					create_starbase = {
						size = "starbase_outpost"
						owner = root.owner
	
						
						effect = {	
						}
					}
				}			
			}
		}
		solar_system = {
			random_fleet_in_system = {
				limit = {
					is_ship_class = shipclass_starbase
				}
				destroy_fleet = { target = this }
			}
			create_starbase = {
				size = starbase_starhold
				owner = root.owner	
		
				module = "shipyard"
				module = "shipyard"
				module = "shipyard"		
				module = "shipyard"	
				
				effect = {	
				}
			}
		}
		every_system = {
			limit = {
				owner = {
					is_same_value = root
				}
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_mining_station
					has_mining_station = no
				}
				create_mining_station = {
					owner = ROOT
				}				
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_research_station 
					has_research_station = no
				}
				create_research_station = {
					owner = ROOT
				}				
			}
		}		
	}
}

country_event = {
	id = acot_startup.4
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	
	

	trigger = {
		any_country = {
			has_origin = origin_tier_five_start
		}
	}
	
	immediate = {
		every_country = {	
			IF = {
				limit = {
					has_origin = origin_tier_five_start
				}
			set_country_flag = tier_five_start
			set_country_flag = custom_start_screen
			add_resource = {
				minerals = 10000
				energy = 10000
				alloys = 5000
				food = 5000
				consumer_goods = 5000
				volatile_motes = 500
				rare_crystals = 500
				exotic_gases = 500		
				influence = 300
				unity = 20000
			}
			every_owned_leader = {
				add_skill = 4
			}
			copy_techs_from = {
				target = event_target:acot_tier_5_dummy_country
				except = {
					tech_akx_worm_1
					tech_akx_worm_2
					tech_akx_worm_3
					tech_psionic_theory
					tech_nanite_assemblers
					tech_nanite_repair_system
					tech_nanite_transmutation
					null_void_beam
					tech_acot_swarm_strike_craft
					tech_swarm_strike_craft_1
					tech_acot_scourge_missile
					tech_scourge_missile_1
					tech_acot_matter_disintegrator
					tech_extradimensional_weapon_1
					tech_energy_lance_edi
					tech_energy_lance_contingency
					tech_perdition_beam_contingency
				}
			}
			country_event = { id = acot_startup.401 days = 1 } #Overwrites other stupid stuffs that prevent our grand ascension.
			capital_scope = { 
				planet_event = { id = acot_startup.400 } 
				}
			}
		}	
	}
}

### SETUP PLANETS
planet_event = {
	id = acot_startup.400
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		clear_blockers = yes
		remove_all_buildings = yes
		prevent_anomaly = yes
		if = {
			limit = { owner = { is_regular_empire = yes } }
			# 3 jobs
			add_building = building_system_capital
			# 2 jobs
			add_building = building_bureaucratic_1
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			add_building = building_factory_1
			add_building = building_factory_1
			add_building = building_clinic
			# 4 jobs
			if = {
				limit = { owner = { is_megacorp = yes } }
				add_building = building_commercial_zone
			}
		}
		if = {
			limit = { owner = { is_hive_empire = yes } }
			# 5 jobs
			add_building = building_hive_major_capital
			add_building = building_hive_node
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			add_building = building_spawning_pool
			add_building = building_hive_warren
			add_building = building_hive_warren
		}

		# Replace capital building for machine empires
		if = {
			limit = { owner = { is_machine_empire = yes } }
			add_building = building_machine_system_capital
			add_building = building_machine_assembly_plant
			add_building = building_uplink_node
			add_building = building_research_lab_1
			add_building = building_research_lab_1
			add_building = building_foundry_1
			add_building = building_foundry_1
			#Servitors
			if = {
				limit = { owner = { has_civic = civic_machine_servitor } }
				add_building = building_organic_sanctuary
			}
		}		
		if = {
			limit = {
				is_capital = yes
			}
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			if = {
				limit = { owner = { has_authority = auth_machine_intelligence } }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
			}
			else_if = {
				limit = { owner = { has_authority = auth_hive_mind } }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
			}
			else = {
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
			}
			if = {
				limit = {
					owner = { NOT = { has_authority = auth_machine_intelligence } }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
			}
			if = {
				limit = {
					owner = { has_authority = auth_machine_intelligence }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
			}
			if = {
				limit = { owner = { is_gestalt = no } }
				add_building = building_factory_1
				add_building = building_commercial_zone
			}
			if = {
				limit = { owner = { is_gestalt = no } }
				add_building = building_factory_1
				add_building = building_commercial_zone
			}
			while = {
				count = 60
				create_pop = { species = owner_main_species }
			}
		}	
	}
}

country_event = {
	id = acot_startup.401
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_owned_fleet = {
			limit = {
				is_ship_class = shipclass_military
			}
			delete_fleet = this				
		}	
		capital_scope = {
			owner = {
				create_leader = {
					class = admiral
					skill = 5
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					assign_leader = last_created_leader
					while = {
						count = 16
						create_ship = {
							name = random
							random_existing_design = corvette
						}
					}
					while = {
						count = 12
						create_ship = {
							name = random
							random_existing_design = destroyer
						}
					}
					while = {
						count = 8
						create_ship = {
							name = random
							random_existing_design = cruiser
						}
					}
					while = {
						count = 4
						create_ship = {
							name = random
							random_existing_design = battleship
						}
					}
					if = {
						limit = { 
							host_has_dlc = Apocalypse 
						}
						create_ship = {
							name = random
							random_existing_design = titan
						}
					}
					assign_leader = last_created_leader
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 5
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 50
						angle = random 
					}
					assign_leader = last_created_leader		
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 5
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 55
						angle = random 
					}	
					assign_leader = last_created_leader				
				}
			}
			solar_system = {
				every_neighbor_system = {
					if = {
						limit = {
							any_system_planet = {
								is_a_habitable_planet_megastructure = yes
							}
						}
						create_starbase = {
							size = "starbase_starport"
							owner = root.owner
							effect = {	
							}
						}
						every_system_planet = {
							limit = {
								is_a_habitable_planet_megastructure = yes		
								NOR = {
									has_owner = yes
									is_planet_class = pc_dark_fractured
									is_planet_class = pc_dark_fractured_ae
								}							
							}
							create_colony = { owner = root }
							clear_blockers = yes
				
							remove_all_buildings = yes
				
							prevent_anomaly = yes
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							if = {
								limit = { owner = { has_authority = auth_machine_intelligence } }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
							}
							else_if = {
								limit = { owner = { has_authority = auth_hive_mind } }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
							}
							else = {
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
							}
							if = {
								limit = {
									owner = { NOT = { has_authority = auth_machine_intelligence } }
								}
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
							}
							if = {
								limit = {
									owner = { has_authority = auth_machine_intelligence }
								}
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
							}
							while = {
								count = 30
								create_pop = { species = owner_main_species }
							}
							if = {
								limit = { owner = { is_regular_empire = yes } }
								# 3 jobs
								add_building = building_system_capital
								# 2 jobs
								add_building = building_bureaucratic_1
								add_building = building_foundry_1
								add_building = building_foundry_1
								add_building = building_factory_1
								add_building = building_factory_1
								# 4 jobs
								if = {
									limit = { owner = { is_megacorp = yes } }
									add_building = building_commercial_zone
								}
							}
							if = {
								limit = { owner = { is_hive_empire = yes } }
								# 5 jobs
								add_building = building_hive_major_capital
								add_building = building_hive_node
								add_building = building_foundry_1
								add_building = building_foundry_1
								add_building = building_hive_warren
							}
					
							# Replace capital building for machine empires
							if = {
								limit = { owner = { is_machine_empire = yes } }
								add_building = building_machine_system_capital
								add_building = building_machine_assembly_plant
								add_building = building_uplink_node
								add_building = building_foundry_1
								add_building = building_foundry_1
							}									
						}
					}
					else = {
						create_starbase = {
							size = "starbase_outpost"
							owner = root.owner
							effect = {	
							}
						}						
					}
					#####
					every_neighbor_system = {
						if = {
							limit = {
								any_system_planet = {
									is_a_habitable_planet_megastructure = yes
								}
								NOT = {
									is_same_value = capital_star
								}
							}
							create_starbase = {
								size = "starbase_starport"
								owner = root.owner
								effect = {	
								}
							}
							every_system_planet = {
								limit = {
									is_a_habitable_planet_megastructure = yes	
									is_colony = no		
									NOR = {
										has_owner = yes
										is_planet_class = pc_dark_fractured
										is_planet_class = pc_dark_fractured_ae
									}							
								}
								create_colony = { owner = root }
								clear_blockers = yes
					
								remove_all_buildings = yes
					
								prevent_anomaly = yes
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								if = {
									limit = { owner = { has_authority = auth_machine_intelligence } }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								}
								else_if = {
									limit = { owner = { has_authority = auth_hive_mind } }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
								}
								else = {
									add_district_and_planet_size_if_needed_effect = { district = district_city }
									add_district_and_planet_size_if_needed_effect = { district = district_city }
									add_district_and_planet_size_if_needed_effect = { district = district_city }
								}
								if = {
									limit = {
										owner = { NOT = { has_authority = auth_machine_intelligence } }
									}
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
								}
								if = {
									limit = {
										owner = { has_authority = auth_machine_intelligence }
									}
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
								}
								while = {
									count = 25
									create_pop = { species = owner_main_species }
								}
								if = {
									limit = { owner = { is_regular_empire = yes } }
									# 3 jobs
									add_building = building_major_capital
									# 2 jobs
									add_building = building_bureaucratic_1
									add_building = building_foundry_1
									add_building = building_factory_1
									# 4 jobs
									if = {
										limit = { owner = { is_megacorp = yes } }
										add_building = building_commercial_zone
									}
								}
								if = {
									limit = { owner = { is_hive_empire = yes } }
									# 5 jobs
									add_building = building_hive_major_capital
									add_building = building_hive_node
									add_building = building_foundry_1
									add_building = building_spawning_pool
									add_building = building_hive_warren
								}
						
								# Replace capital building for machine empires
								if = {
									limit = { owner = { is_machine_empire = yes } }
									add_building = building_machine_major_capital
									add_building = building_machine_assembly_plant
									add_building = building_foundry_1
								}								
							}
						}
						else = {
							create_starbase = {
								size = "starbase_outpost"
								owner = root.owner
			
								
								effect = {	
								}
							}						
						}
					}
				}			
			}
			solar_system = {
				random_fleet_in_system = {
					limit = {
						is_ship_class = shipclass_starbase
					}
					destroy_fleet = { target = this }
				}
				create_starbase = {
					size = starbase_citadel
					owner = root.owner	
			
					module = "shipyard"
					module = "shipyard"
					module = "shipyard"		
					module = "shipyard"	
					
					effect = {	
					}
				}
			}
		}
		every_system = {
			limit = {
				owner = {
					is_same_value = root
				}
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_mining_station
					has_mining_station = no
				}
				create_mining_station = {
					owner = ROOT
				}				
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_research_station 
					has_research_station = no
				}
				create_research_station = {
					owner = ROOT
				}				
			}
		}		
	}
}

country_event = {
	id = acot_startup.5
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes
	
	

	trigger = {
		any_country = {
			has_origin = origin_tier_dm_start
		}
	}
	
	immediate = {
		every_country = {	
			IF = {
				limit = {
					has_origin = origin_tier_dm_start
				}
			set_country_flag = tier_dm_start
			set_country_flag = custom_start_screen
			add_resource = {
				minerals = 15000
				energy = 15000
				alloys = 7500
				food = 7500
				consumer_goods = 7500
				volatile_motes = 750
				rare_crystals = 750
				exotic_gases = 750		
				influence = 450
				unity = 30000
				acot_sr_dark_energy = 500
				sr_dark_matter = 500
			}
			every_owned_leader = {
				add_skill = 5
			}
			copy_techs_from = {
				target = event_target:acot_tier_dm_dummy_country
				except = {
					tech_akx_worm_1
					tech_akx_worm_2
					tech_akx_worm_3
					tech_psionic_theory
					tech_nanite_assemblers
					tech_nanite_repair_system
					tech_nanite_transmutation
					null_void_beam
					tech_acot_swarm_strike_craft
					tech_swarm_strike_craft_1
					tech_acot_scourge_missile
					tech_scourge_missile_1
					tech_acot_matter_disintegrator
					tech_extradimensional_weapon_1
					tech_energy_lance_edi
					tech_energy_lance_contingency
					tech_perdition_beam_contingency
				}
			}
			country_event = { id = acot_test_event.0 } #Overwrites other stupid stuffs that prevent our grand ascension.
			country_event = { id = acot_startup.501 days = 1 } #Overwrites other stupid stuffs that prevent our grand ascension.
			capital_scope = { 
				planet_event = { id = acot_startup.500 } 
				}
			}
		}	
	}
}

### SETUP PLANETS
planet_event = {
	id = acot_startup.500
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		clear_blockers = yes
		remove_all_buildings = yes
		prevent_anomaly = yes
		if = {
			limit = { owner = { is_regular_empire = yes } }
			add_building = building_dm_ancient_palace
			add_building = building_fe_mansion
			add_building = building_enigmatic_lab
			add_building = building_enigmatic_lab
			add_building = building_fe_alloy_forge
			add_building = building_fe_alloy_forge
			add_building = building_fe_factory
			add_building = building_dark_energy_pylon
			add_building = building_dark_energy_pylon
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_synthersizer
			if = {
				limit = { owner = { is_megacorp = yes } }
				add_district_and_planet_size_if_needed_effect = {
					district = district_city
				}
				add_building = building_commercial_zone
			}
		}
		if = {
			limit = { owner = { is_hive_empire = yes } }

			add_building = building_dm_ancient_hive_cluster
			add_building = building_enigmatic_lab
			add_building = building_enigmatic_lab
			add_building = building_fe_alloy_forge
			add_building = building_fe_alloy_forge
			add_building = building_fe_hive_depot
			add_building = building_fe_hive_pool
			add_building = building_dark_energy_pylon
			add_building = building_dark_energy_pylon
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_synthersizer
		}

		# Replace capital building for machine empires
		if = {
			limit = { owner = { is_machine_empire = yes } }

			add_building = building_dm_ancient_control_center
			add_building = building_super_assembly_machine
			add_building = building_dm_ancient_cryo_chamber
			add_building = building_enigmatic_lab
			add_building = building_enigmatic_lab
			add_building = building_fe_alloy_forge
			add_building = building_fe_alloy_forge
			add_building = building_dark_energy_pylon
			add_building = building_dark_energy_pylon
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_generator
			add_building = building_dark_matter_synthersizer	
			#Servitors
			if = {
				limit = { owner = { has_civic = civic_machine_servitor } }
				add_building = building_organic_sanctuary
			}
		}
		if = {
			limit = {
				is_capital = yes
			}
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			if = {
				limit = { owner = { has_authority = auth_machine_intelligence } }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
				add_district_and_planet_size_if_needed_effect = { district = district_nexus }
			}
			else_if = {
				limit = { owner = { has_authority = auth_hive_mind } }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
				add_district_and_planet_size_if_needed_effect = { district = district_hive }
			}
			else = {
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
				add_district_and_planet_size_if_needed_effect = { district = district_city }
			}
			if = {
				limit = {
					owner = { NOT = { has_authority = auth_machine_intelligence } }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
				add_district_and_planet_size_if_needed_effect = { district = district_farming }
			}
			if = {
				limit = {
					owner = { has_authority = auth_machine_intelligence }
				}
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
				add_district_and_planet_size_if_needed_effect = { district = district_generator }
			}
			if = {
				limit = { owner = { is_gestalt = no } }
				add_building = building_factory_1
				add_building = building_commercial_zone
			}
			while = {
				count = 40
				create_pop = { species = owner_main_species }
			}
		}	
	}
}

country_event = {
	id = acot_startup.501
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		every_owned_fleet = {
			limit = {
				is_ship_class = shipclass_military
			}
			delete_fleet = this				
		}	
		capital_scope = {

			owner = {
				create_leader = {
					class = admiral
					skill = 6
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					assign_leader = last_created_leader
					while = {
						count = 10
						create_ship = {
							name = random
							random_existing_design = destroyer
						}
					}
					while = {
						count = 6
						create_ship = {
							name = random
							random_existing_design = cruiser
						}
					}
					while = {
						count = 4
						create_ship = {
							name = random
							random_existing_design = battleship
						}
					}
					if = {
						limit = { 
							host_has_dlc = Apocalypse 
						}
						create_ship = {
							name = random
							random_existing_design = titan
						}
					}
					assign_leader = last_created_leader
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					assign_leader = last_created_leader
					random_list = { 
						50 = {
							while = {
								count = 3
								create_ship = {
									name = random
									design = "NAME_Sage"
									graphical_culture = fallen_empire_02
								}
							}
							while = {
								count = 3
								create_ship = {
									name = random
									design = "NAME_Zealot"
									graphical_culture = fallen_empire_01
								}
							}
						}
						50 = {
							while = {
								count = 3
								create_ship = {
									name = random
									design = "NAME_Glory"
									graphical_culture = fallen_empire_04
								}
							}
							while = {
								count = 3
								create_ship = {
									name = random
									design = "NAME_Warden"
									graphical_culture = fallen_empire_03
								}
							}
						}
					}
					random_list = { 
						50 = {
							while = {
								count = 1
								create_ship = {
									name = random
									design = "NAME_Scholar"
									graphical_culture = fallen_empire_02
								}
							}
							while = {
								count = 1
								create_ship = {
									name = random
									design = "NAME_Avatar"
									graphical_culture = fallen_empire_01
								}
							}
						}
						50 = {
							while = {
								count = 1
								create_ship = {
									name = random
									design = "NAME_Supremacy"
									graphical_culture = fallen_empire_04
								}
							}
							while = {
								count = 1
								create_ship = {
									name = random
									design = "NAME_Custodian"
									graphical_culture = fallen_empire_03
								}
							}
						}
					}
					assign_leader = last_created_leader
					set_location = {
						target = prev
						distance = 60
						angle = random 
					}				
				}
			}
			IF = {
				limit = {
					host_has_dlc = Federations
				}
				create_fleet = {
					effect = {
						set_owner = root.owner	
						create_ship = {
							name = random
							random_existing_design = juggernaut
						}
						set_location = {
							target = prev
							distance = 25
							angle = random 
						}				
					}
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 5
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 50
						angle = random 
					}
					assign_leader = last_created_leader		
				}
			}
			owner = {
				create_leader = {
					class = scientist
					skill = 5
					sub_type = survey
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = science
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 55
						angle = random 
					}	
					assign_leader = last_created_leader				
				}
			}
			solar_system = {
				every_neighbor_system = {
					if = {
						limit = {
							any_system_planet = {
								is_a_habitable_planet_megastructure = yes
							}
						}
						create_starbase = {
							size = "starbase_starport"
							owner = root.owner			
							effect = {	
							}
						}
						every_system_planet = {
							limit = {
								is_a_habitable_planet_megastructure = yes	
								is_colony = no		
								NOR = {
									has_owner = yes
									is_planet_class = pc_dark_fractured
									is_planet_class = pc_dark_fractured_ae
								}						
							}
							create_colony = { owner = root }
							clear_blockers = yes
				
							remove_all_buildings = yes
				
							prevent_anomaly = yes
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							if = {
								limit = { owner = { has_authority = auth_machine_intelligence } }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								add_district_and_planet_size_if_needed_effect = { district = district_nexus }
							}
							else_if = {
								limit = { owner = { has_authority = auth_hive_mind } }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
								add_district_and_planet_size_if_needed_effect = { district = district_hive }
							}
							else = {
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
							}
							if = {
								limit = {
									owner = { NOT = { has_authority = auth_machine_intelligence } }
								}
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
							}
							if = {
								limit = {
									owner = { has_authority = auth_machine_intelligence }
								}
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
							}
							while = {
								count = 45
								create_pop = { species = owner_main_species }
							}
							if = {
								limit = { owner = { is_regular_empire = yes } }
								add_building = building_dm_ancient_palace
								add_building = building_fe_mansion
								add_building = building_fe_mineral_processing_plant
								add_building = building_fe_power_hub
								add_building = building_fe_factory
								add_building = building_dark_energy_pylon
								add_building = building_dark_energy_pylon
								add_building = building_dark_matter_generator
								add_building = building_dark_matter_generator
								if = {
									limit = { owner = { is_megacorp = yes } }
									add_district_and_planet_size_if_needed_effect = {
										district = district_city
									}
									add_building = building_commercial_zone
								}
							}
							if = {
								limit = { owner = { is_hive_empire = yes } }
					
								add_building = building_dm_ancient_hive_cluster
								add_building = building_fe_mineral_processing_plant
								add_building = building_fe_power_hub
								add_building = building_fe_hive_depot
								add_building = building_fe_hive_pool
								add_building = building_dark_energy_pylon
								add_building = building_dark_energy_pylon
								add_building = building_dark_matter_generator
								add_building = building_dark_matter_generator
							}
							if = {
								limit = { owner = { is_machine_empire = yes } }
					
								add_building = building_dm_ancient_control_center
								add_building = building_dm_ancient_cryo_chamber
								add_building = building_fe_mineral_processing_plant
								add_building = building_fe_power_hub
								add_building = building_dark_energy_pylon
								add_building = building_dark_energy_pylon
								add_building = building_dark_matter_generator
								add_building = building_dark_matter_generator
							}								
						}
					}
					else = {
						create_starbase = {
							size = "starbase_outpost"
							owner = root.owner
		
							
							effect = {	
							}
						}						
					}
					every_neighbor_system = {
						if = {
							limit = {
								any_system_planet = {
									is_a_habitable_planet_megastructure = yes
									NOT = {
										is_same_value = capital_star
									}
								}
							}
							create_starbase = {
								size = "starbase_starport"
								owner = root.owner
								effect = {	
								}
							}
							every_system_planet = {
								limit = {
									is_a_habitable_planet_megastructure = yes	
									is_colony = no		
									NOR = {
										has_owner = yes
										is_planet_class = pc_dark_fractured
										is_planet_class = pc_dark_fractured_ae
									}					
								}
								create_colony = { owner = root }
								clear_blockers = yes
					
								remove_all_buildings = yes
					
								prevent_anomaly = yes
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								if = {
									limit = { owner = { has_authority = auth_machine_intelligence } }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
									add_district_and_planet_size_if_needed_effect = { district = district_nexus }
								}
								else_if = {
									limit = { owner = { has_authority = auth_hive_mind } }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
									add_district_and_planet_size_if_needed_effect = { district = district_hive }
								}
								else = {
									add_district_and_planet_size_if_needed_effect = { district = district_city }
									add_district_and_planet_size_if_needed_effect = { district = district_city }
									add_district_and_planet_size_if_needed_effect = { district = district_city }
									add_district_and_planet_size_if_needed_effect = { district = district_city }
								}
								if = {
									limit = {
										owner = { NOT = { has_authority = auth_machine_intelligence } }
									}
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
									add_district_and_planet_size_if_needed_effect = { district = district_farming }
								}
								if = {
									limit = {
										owner = { has_authority = auth_machine_intelligence }
									}
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
									add_district_and_planet_size_if_needed_effect = { district = district_generator }
								}
								while = {
									count = 45
									create_pop = { species = owner_main_species }
								}
								if = {
									limit = { owner = { is_regular_empire = yes } }
									add_building = building_dm_ancient_palace
									add_building = building_fe_mansion
									add_building = building_fe_mineral_processing_plant
									add_building = building_fe_power_hub
									add_building = building_fe_factory
									add_building = building_dark_energy_pylon
									add_building = building_dark_energy_pylon
									add_building = building_dark_matter_generator
									add_building = building_dark_matter_generator
									if = {
										limit = { owner = { is_megacorp = yes } }
										add_district_and_planet_size_if_needed_effect = {
											district = district_city
										}
										add_building = building_commercial_zone
									}
								}
								if = {
									limit = { owner = { is_hive_empire = yes } }
						
									add_building = building_dm_ancient_hive_cluster
									add_building = building_fe_mineral_processing_plant
									add_building = building_fe_power_hub
									add_building = building_fe_hive_depot
									add_building = building_fe_hive_pool
									add_building = building_dark_energy_pylon
									add_building = building_dark_energy_pylon
									add_building = building_dark_matter_generator
									add_building = building_dark_matter_generator
								}
								if = {
									limit = { owner = { is_machine_empire = yes } }
						
									add_building = building_dm_ancient_control_center
									add_building = building_dm_ancient_cryo_chamber
									add_building = building_fe_mineral_processing_plant
									add_building = building_fe_power_hub
									add_building = building_dark_energy_pylon
									add_building = building_dark_energy_pylon
									add_building = building_dark_matter_generator
									add_building = building_dark_matter_generator
								}								
							}
						}
						else = {
							create_starbase = {
								size = "starbase_outpost"
								owner = root.owner
			
								
								effect = {	
								}
							}						
						}
					}
				}			
			}
			solar_system = {
				random_fleet_in_system = {
					limit = {
						is_ship_class = shipclass_starbase
					}
					destroy_fleet = { target = this }
				}
				create_starbase = {
					size = starbase_citadel
					owner = root.owner	
			
					module = "shipyard"
					module = "shipyard"
					module = "shipyard"		
					module = "shipyard"	
					
					effect = {	
					}
				}
			}
		}
		every_system = {
			limit = {
				owner = {
					is_same_value = root
				}
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_mining_station
					has_mining_station = no
				}
				create_mining_station = {
					owner = ROOT
				}				
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_research_station 
					has_research_station = no
				}
				create_research_station = {
					owner = ROOT
				}				
			}
		}		
	}
}

# Rebels Setup
country_event = {
	id = acot_startup.6
	hide_window = yes
	fire_only_once = yes
	is_triggered_only = yes

	trigger = {
		any_country = {
			has_origin = origin_acot_fe_rebel
		}
	}

	immediate = {
		every_country = {	
			IF = {
				limit = {
					has_origin = origin_acot_fe_rebel
				}
			set_country_flag = acot_rebel_start
			set_country_flag = custom_start_screen
			add_resource = {
				minerals = 10000
				energy = 10000
				alloys = 5000
				food = 5000
				consumer_goods = 5000
				volatile_motes = 500
				rare_crystals = 500
				exotic_gases = 500		
				influence = 300
				unity = 20000
			}
			every_owned_leader = {
				add_skill = 2
			}
			give_technology = {
				tech = tech_jump_drive_1
				message = no
			}
			begin_event_chain = {
				event_chain = acot_origin_fe_rebel_chain
			}
			copy_techs_from = {
				target = event_target:acot_tier_5_dummy_country
				except = {
					tech_akx_worm_1
					tech_akx_worm_2
					tech_akx_worm_3
					tech_psionic_theory
					tech_nanite_assemblers
					tech_nanite_repair_system
					tech_nanite_transmutation
					null_void_beam
					tech_acot_swarm_strike_craft
					tech_swarm_strike_craft_1
					tech_acot_scourge_missile
					tech_scourge_missile_1
					tech_acot_matter_disintegrator
					tech_extradimensional_weapon_1
					tech_energy_lance_edi
					tech_energy_lance_contingency
					tech_perdition_beam_contingency
				}
			}
			country_event = { id = acot_startup.601 days = 1 } #Overwrites other stupid stuffs that prevent our grand ascension.
			capital_scope = { 
				planet_event = { id = acot_startup.600 } 
				}
			}
		}
		if = {
			limit = {
				NOT = {
					exists = event_target:fe_allied_rebel
				}
			 }
			 create_country = {
				name = "Fallen Rebels"
				type = acot_allied_fe
				auto_delete = no
				flag = {
					icon = {
						category = "special"
						file = "the_shroud.dds"
					}
					background= {
						category = "backgrounds"
						file = "00_solid.dds"
					}
					colors={
						"teal"
						"black"
						"null"
						"null"
					}
				}
				effect = {
					set_country_flag = fe_allied_rebel
					save_global_event_target_as = fe_allied_rebel
					set_faction_hostility = {
						target = root
						set_hostile = no
						set_neutral = no
						set_friendly = yes
					}	
					establish_communications_no_message = root
					add_modifier = {
						modifier = acot_temp_fe_allied_immunity
					}				
				}
			}
		}
		set_country_flag = first_contact_event
		set_country_flag = Story1
		set_country_flag = Story2 # Already encountered spacefarers
		set_country_flag = Story3 
		set_country_flag = Story4
		set_country_flag = Story5 
		set_country_flag = Story6
		set_country_flag = Story7
		set_country_flag = has_encountered_other_empire
		if = {
			limit = { NOT = { has_country_flag = StoryFirst } }
			set_country_flag = StoryFirst
		}
		if = {
			limit = { NOT = { has_country_flag = first_alien_life } }
			set_country_flag = first_alien_life
		}

		# Spawn mini-FE if player turned off Fallen Empires but picked this Origin anyway...
		if = {
			limit = {
				NOT = {
					any_country = {
						OR = {
							is_country_type = fallen_empire
							is_country_type = awakened_fallen_empire
						}
					}
				}
			}
			set_country_flag = rebels_need_fe
			if = {
				limit = { is_spiritualist = yes }
				random_system = {
					limit = { has_owner = no }
					spawn_system = { initializer = "fe_aggressor_2" }
				}
			}
			else_if = {
				limit = { is_materialist = yes }
				random_system = {
					limit = { has_owner = no }
					spawn_system = { initializer = "fe_aggressor_1" }
				}
			}
			else_if = {
				random_list = {
					10 = {
						random_system = {
							limit = { has_owner = no }
							spawn_system = { initializer = "fe_aggressor_1" }
						}
					}
					10 = {
						random_system = {
							limit = { has_owner = no }
							spawn_system = { initializer = "fe_aggressor_2" }
						}
					}
				}
			}
			add_extra_hyperlane_to_spawned_system_effect = yes
		}

		else_if = {
			limit = {
				is_spiritualist = yes
				any_country = { has_country_flag = fallen_empire_2 }
			}
			random_country = {
				limit = { has_country_flag = fallen_empire_2 }
				set_country_flag = fe_aggressor
				save_event_target_as = fe_aggressor
				owner_main_species = {
					save_event_target_as = fe_aggressor_species
				}
#				add_opinon_modifier = {
#					who = root
#					modifier = opinion_scion
#				}
				root = {
					establish_communications_no_message = event_target:fe_aggressor
					declare_war = {
						target = event_target:fe_aggressor
						attacker_war_goal = acot_wg_rebel_fe
					}
#					add_opinion_modifier = {
#						who = event_target:fe_aggressor
#						modifier = opinion_scion
#					}
					country_event = { id = acot_startup.602 days = 3 }
				}
			}
		}
		else_if = {
			limit = {
				is_materialist = yes
				any_country = { has_country_flag = fallen_empire_1 }
			}
			random_country = {
				limit = { has_country_flag = fallen_empire_1 }
				set_country_flag = fe_aggressor
				save_event_target_as = fe_aggressor
				root = {
					establish_communications_no_message = event_target:fe_aggressor
					declare_war = {
						target = event_target:fe_aggressor
						attacker_war_goal = acot_wg_rebel_fe
					}
					country_event = { id = acot_startup.602 days = 3 }
				}
			}
		}
		else_if = {
			limit = {
				is_xenophile = yes
				any_country = { has_country_flag = fallen_empire_3 }
			}
			random_country = {
				limit = { has_country_flag = fallen_empire_3 }
				set_country_flag = fe_aggressor
				save_event_target_as = fe_aggressor
				root = {
					establish_communications_no_message = event_target:fe_aggressor
					declare_war = {
						target = event_target:fe_aggressor
						attacker_war_goal = acot_wg_rebel_fe
					}
					country_event = { id = acot_startup.602 days = 3 }
				}
			}
		}
		else = {
			random_country = {
				limit = {
					OR = {
						has_country_flag = fallen_empire_1
						has_country_flag = fallen_empire_2
						has_country_flag = fallen_empire_3
					}
				}
				set_country_flag = fe_aggressor
				save_event_target_as = fe_aggressor
				root = {
					establish_communications_no_message = event_target:fe_aggressor
					declare_war = {
						target = event_target:fe_aggressor
						attacker_war_goal = acot_wg_rebel_fe
					}
					country_event = { id = acot_startup.602 days = 3 }
				}
			}
		}
		event_target:fe_aggressor = {
			set_faction_hostility = {
				target = event_target:fe_allied_rebel
				set_hostile = yes
				set_neutral = no
				set_friendly = no
			}	
			add_modifier = {
				modifier = acot_temp_fe_allied_immunity days = 360
			}
			establish_communications_no_message = event_target:fe_allied_rebel
			owner_main_species = {
				save_event_target_as = aggressor_species
			}
			country_event = {
				id = acot_startup.603 days = 90
			}
			random_system_within_border = {
				limit = {
					starting_system = no				
				}
				set_star_flag = origin_fe_rebel_point
				random_fleet_in_system = {
					limit = {
						is_ship_class = shipclass_starbase
					}
					set_owner = root
				}
				random_system_planet = {
					save_event_target_as = spawning_planet
					create_fleet = {
						effect = {
							set_owner = event_target:fe_allied_rebel
							while = {
								count = 8
								create_rebel_fallen_empire_large_ship = yes
							}
							while = {
								count = 16
								create_rebel_fallen_empire_small_ship = yes
							}
							add_modifier = {
								modifier = acot_temp_fe_allied_immunity
							}
							set_location = {
								target = prev
								distance = 75
								angle = 60
							}
						}
					}
					root = {
						create_rebel_fallen_empire_admiral = yes
					}
					create_fleet = {
						settings = {
							uses_naval_capacity = no
						}
						effect = {
							set_owner = root
							create_rebel_fallen_empire_titan = yes
							assign_leader = last_created_leader
							while = {
								count = 12
								create_rebel_fallen_empire_large_ship = yes
							}
							while = {
								count = 16
								create_rebel_fallen_empire_small_ship = yes
							}
							add_modifier = {
								modifier = acot_fleet_no_upkeep
							}
							set_location = {
								target = prev
								distance = 75
								angle = 60
							}
						}
					}
					root = {
						create_leader = {
							class = admiral
							species = root.species
							name = random
							skill = 10
						}
					}
					create_fleet = {
						effect = {
							set_owner = root
							create_ship = {
								name = random
								random_existing_design = titan
								graphical_culture = root
								effect = { add_modifier = { modifier = acot_ancient_armada_buff } }
							}
							assign_leader = last_created_leader
							while = {
								count = 12
								create_ship = {
									name = random
									random_existing_design = battleship
									graphical_culture = root
								}
							}
							while = {
								count = 20
								create_ship = {
									name = random
									random_existing_design = destroyer
									graphical_culture = root							
								}
							}
							add_modifier = {
								modifier = acot_fleet_no_upkeep
							}
							set_location = {
								target = prev
								distance = 80
								angle = 120
							}
						}
					}
					create_fleet = {
						effect = {
							set_name = "Ancient Fabricator Ship"
							set_owner = root
							create_fe_rebel_constructor_ship = yes
							last_created_ship = {
								create_point_of_interest = {
									id = acot_origin_fe_rebel_pov.1
									name = acot_origin_fe_rebel_pov.1.title
									desc = acot_origin_fe_rebel_pov.1.desc
									event_chain = acot_origin_fe_rebel_chain
									location = THIS
								}								
							}
							add_modifier = {
								modifier = acot_super_supply_ship
							}
							set_fleet_flag = acot_fe_transport_ship
							set_fleet_stance = passive
							set_location = {
								target = prev
								distance = 60
								angle = 80
							}
						}
					}
					create_fleet = {
						effect = {
							set_name = "Ancient Supply Ship"
							set_owner = root
							create_fe_rebel_colony_ship = yes
							last_created_ship = {
								create_point_of_interest = {
									id = acot_origin_fe_rebel_pov.2
									name = acot_origin_fe_rebel_pov.2.title
									desc = acot_origin_fe_rebel_pov.2.desc
									event_chain = acot_origin_fe_rebel_chain
									location = THIS
								}								
							}
							add_modifier = {
								modifier = acot_super_supply_ship
							}
							set_fleet_flag = acot_fe_supply_ship
							set_fleet_stance = passive
							set_location = {
								target = prev
								distance = 70
								angle = 80
							}
						}
					}
					root = {
						create_leader = {
							class = scientist
							skill = 10
							sub_type = survey
							species = owner_main_species
						}
					}
					create_fleet = {
						effect = {
							set_name = "Ancient Data Ship"
							set_owner = root
							create_fe_rebel_science_ship = yes
							last_created_ship = {
								create_point_of_interest = {
									id = acot_origin_fe_rebel_pov.3
									name = acot_origin_fe_rebel_pov.3.title
									desc = acot_origin_fe_rebel_pov.3.desc
									event_chain = acot_origin_fe_rebel_chain
									location = THIS
								}								
							}
							assign_leader = last_created_leader
							add_modifier = {
								modifier = acot_super_supply_ship
							}
							set_fleet_flag = acot_fe_tech_ship
							set_fleet_stance = passive
							set_location = {
								target = prev
								distance = 75
								angle = 70
							}
						}
					}
					root = {
						create_leader = {
							class = scientist
							skill = 10
							sub_type = survey
							species = owner_main_species
						}
					}
					create_fleet = {
						effect = {
							set_owner = root
							set_name = "Ancient Reactivation Ship"
							create_fe_rebel_science_ship = yes
							last_created_ship = {
								create_point_of_interest = {
									id = acot_origin_fe_rebel_pov.4
									name = acot_origin_fe_rebel_pov.4.title
									desc = acot_origin_fe_rebel_pov.4.desc
									event_chain = acot_origin_fe_rebel_chain
									location = THIS
								}								
							}
							assign_leader = last_created_leader
							add_modifier = {
								modifier = acot_super_supply_ship
							}
							set_fleet_flag = acot_fe_reactive_ship
							set_fleet_stance = passive
							set_location = {
								target = prev
								distance = 65
								angle = 70
							}
						}
					}
					create_fleet = {
						effect = {
							set_owner = event_target:fe_aggressor
							create_fallen_empire_titan = yes
							while = {
								count = 2
								create_fallen_empire_large_ship = yes
							}
							add_modifier = {
								modifier = acot_temp_fe_allied_immunity days = 360
							}
							set_location = {
								target = prev
								distance = 200
								angle = 190
							}
						}
					}							
				}
			}
			every_system_within_border = {
				limit = {
					NOT = {
						has_star_flag = origin_fe_rebel_point
					}
				}
				random_system_planet = {
					create_fleet = {
						effect = {
							set_owner = event_target:fe_allied_rebel
							while = {
								count = 6
								create_rebel_fallen_empire_large_ship = yes
							}
							while = {
								count = 12
								create_rebel_fallen_empire_small_ship = yes
							}
							add_modifier = {
								modifier = acot_temp_fe_allied_immunity days = 360
							}
							set_location = {
								target = prev
								distance = 120
								angle = 60
							}
						}
					}
					create_fleet = {
						effect = {
							set_owner = event_target:fe_aggressor
							add_modifier = {
								modifier = acot_temp_fe_allied_immunity days = 360
							}
							create_fallen_empire_large_ship = yes
							
							while = {
								count = 2
								create_fallen_empire_small_ship = yes
							}
							set_location = {
								target = prev
								distance = 20
								angle = 120
							}
						}
					}	
					create_fleet = {
						effect = {
							set_owner = event_target:fe_allied_rebel
							add_modifier = {
								modifier = acot_temp_fe_allied_immunity days = 360
							}
							while = {
								count = 4
								create_ship = {
									name = random
									random_existing_design = battleship
									graphical_culture = root
								}
							}
							while = {
								count = 8
								create_ship = {
									name = random
									random_existing_design = destroyer
									graphical_culture = root							
								}
							}
							set_location = {
								target = prev
								distance = 80
								angle = 120
							}
						}
					}				
				}
			}
		}
	}

}

# Intro Diplomatic Message
country_event = {
	id = acot_startup.602
	title = TRANSMISSION

	desc = {
		trigger = {
			event_target:fe_aggressor = { has_country_flag = fallen_empire_1 }
		}
		text = "acot_startup.601.a.desc"
	}
	desc = {
		trigger = {
			event_target:fe_aggressor = { has_country_flag = fallen_empire_2 }
		}
		text = "acot_startup.601.b.desc"
	}
	desc = {
		trigger = {
			event_target:fe_aggressor = { has_country_flag = fallen_empire_3 }
		}
		text = "acot_startup.601.c.desc"
	}

	diplomatic = yes

	is_triggered_only = yes

	picture_event_data = {
		portrait = event_target:fe_aggressor
		planet_background = event_target:fe_aggressor
		graphical_culture = event_target:fe_aggressor
		city_level = event_target:fe_aggressor
		room = event_target:fe_aggressor
	}

	immediate = {
		#overlord = { save_event_target_as = fe_aggressor }
	}

	option = {
		name = acot_startup.601.a
	}
}

### SETUP PLANETS
planet_event = {
	id = acot_startup.600
	hide_window = yes
	is_triggered_only = yes
	fire_only_once = yes

	immediate = {
		clear_blockers = yes
		remove_all_buildings = yes
		prevent_anomaly = yes
		IF = {
			limit = {
				planet_size < 30
			}
			set_planet_size = 30
		}
		add_modifier = { modifier = natural_beauty }
		add_deposit = d_tempestous_mountain
		add_deposit = d_frozen_gas_lake
		add_deposit = d_underwater_vent

		add_deposit = d_rich_mountain
		add_deposit = d_submerged_ore_veins
		add_deposit = d_ore_rich_caverns

		add_deposit = d_teeming_reef
		add_deposit = d_black_soil
		add_deposit = d_fertile_lands

		# 3 jobs
		add_building = building_system_capital
		# 2 jobs
		add_building = building_bureaucratic_1
		add_building = building_research_lab_1
		add_building = building_research_lab_1
		add_building = building_research_lab_1
		add_building = building_foundry_1
		add_building = building_foundry_1
		add_building = building_factory_1
		add_building = building_factory_1
		add_building = building_clinic
		add_building = building_mineral_purification_plant
		add_building = building_energy_grid
		# 4 jobs
		if = {
			limit = { owner = { is_megacorp = yes } }
			add_building = building_commercial_zone
		}
		if = {
			limit = {
				is_capital = yes
			}
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_mining }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_generator }
			add_district_and_planet_size_if_needed_effect = { district = district_farming }
			add_district_and_planet_size_if_needed_effect = { district = district_farming }
			add_district_and_planet_size_if_needed_effect = { district = district_farming }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			add_district_and_planet_size_if_needed_effect = { district = district_city }
			while = {
				count = 45
				create_pop = { species = owner_main_species }
			}
		}	
	}
}

country_event = {
	id = acot_startup.601
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		capital_scope = {
			owner = {
				create_leader = {
					class = admiral
					skill = 10
					species = owner_main_species
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					assign_leader = last_created_leader
					while = {
						count = 18
						create_ship = {
							name = random
							random_existing_design = destroyer
						}
					}
					while = {
						count = 12
						create_ship = {
							name = random
							random_existing_design = cruiser
						}
					}
					while = {
						count = 6
						create_ship = {
							name = random
							random_existing_design = battleship
						}
					}
					if = {
						limit = { 
							host_has_dlc = Apocalypse 
						}
						create_ship = {
							name = random
							random_existing_design = titan
						}
					}
					add_modifier = {
						modifier = acot_fleet_no_upkeep
					}
					assign_leader = last_created_leader
					set_location = {
						target = prev
						distance = 45
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			create_fleet = {
				effect = {
					set_owner = root.owner	
					create_ship = {
						random_existing_design = constructor
						graphical_culture = root.owner
					}	
					set_location = {
						target = prev
						distance = 30
						angle = random 
					}				
				}
			}
			solar_system = {
				every_neighbor_system = {
					if = {
						limit = {
							any_system_planet = {
								is_a_habitable_planet_megastructure = yes
							}
						}
						every_system_planet = {
							limit = {
								is_a_habitable_planet_megastructure = yes		
								NOR = {
									has_owner = yes
									is_planet_class = pc_dark_fractured
									is_planet_class = pc_dark_fractured_ae
								}							
							}
							create_colony = { owner = root }
							clear_blockers = yes
				
							remove_all_buildings = yes
				
							prevent_anomaly = yes
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_mining }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_generator }
							add_district_and_planet_size_if_needed_effect = { district = district_farming }
							add_district_and_planet_size_if_needed_effect = { district = district_farming }
							add_district_and_planet_size_if_needed_effect = { district = district_farming }
							add_district_and_planet_size_if_needed_effect = { district = district_city }
							add_district_and_planet_size_if_needed_effect = { district = district_city }
							add_district_and_planet_size_if_needed_effect = { district = district_city }
							add_district_and_planet_size_if_needed_effect = { district = district_city }
							while = {
								count = 30
								create_pop = { species = owner_main_species }
							}
							# 3 jobs
							add_building = building_system_capital
							# 2 jobs
							add_building = building_bureaucratic_1
							add_building = building_foundry_1
							add_building = building_foundry_1
							add_building = building_factory_1
							add_building = building_factory_1
							# 4 jobs
							if = {
								limit = { owner = { is_megacorp = yes } }
								add_building = building_commercial_zone
							}							
						}
						create_starbase = {
							size = "starbase_starfortress"
							owner = root.owner

							module = gun_battery
							module = gun_battery
							module = gun_battery	
							module = gun_battery
							module = gun_battery
							module = gun_battery	

							effect = {	

								while = {
									count = 2
									create_ship = {
										name = random
										random_existing_design = ion_cannon
										graphical_culture = owner
									}
								}
								while = {
									count = 4
									create_ship = {
										name = random
										random_existing_design = military_station_small
										graphical_culture = owner
									}
								}
							}
						}
					}
					else = {
						create_starbase = {
							size = "starbase_outpost"
							owner = root.owner
							effect = {	
							}
						}						
					}
					#####
					every_neighbor_system = {
						if = {
							limit = {
								any_system_planet = {
									is_a_habitable_planet_megastructure = yes
								}
								NOT = {
									is_same_value = capital_star
								}
							}
							every_system_planet = {
								limit = {
									is_a_habitable_planet_megastructure = yes		
									NOR = {
										has_owner = yes
										is_planet_class = pc_dark_fractured
										is_planet_class = pc_dark_fractured_ae
									}							
								}
								create_colony = { owner = root }
								clear_blockers = yes
					
								remove_all_buildings = yes
					
								prevent_anomaly = yes

								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_mining }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_generator }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_farming }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								add_district_and_planet_size_if_needed_effect = { district = district_city }
								
								while = {
									count = 30
									create_pop = { species = owner_main_species }
								}
								# 3 jobs
								add_building = building_system_capital
								# 2 jobs
								add_building = building_bureaucratic_1
								add_building = building_foundry_1
								add_building = building_foundry_1
								add_building = building_factory_1
								add_building = building_factory_1
								# 4 jobs
								if = {
									limit = { owner = { is_megacorp = yes } }
									add_building = building_commercial_zone
								}							
							}
							create_starbase = {
								size = "starbase_starfortress"
								owner = root.owner
								module = gun_battery
								module = gun_battery
								module = gun_battery	
								module = gun_battery
								module = gun_battery
								module = gun_battery	
	
								effect = {	
	
									while = {
										count = 2
										create_ship = {
											name = random
											random_existing_design = ion_cannon
											graphical_culture = owner
										}
									}
									while = {
										count = 4
										create_ship = {
											name = random
											random_existing_design = military_station_small
											graphical_culture = owner
										}
									}
								}
							}
						}
						else = {
							create_starbase = {
								size = "starbase_outpost"
								owner = root.owner
			
								
								effect = {	
								}
							}						
						}
					}
				}			
			}
			solar_system = {
				random_fleet_in_system = {
					limit = {
						is_ship_class = shipclass_starbase
					}
					destroy_fleet = { target = this }
				}
				create_starbase = {
					size = starbase_citadel
					owner = root.owner	
			
					module = "shipyard"
					module = "shipyard"
					module = "shipyard"		
					module = "shipyard"	
					module = "shipyard"		
					module = "shipyard"	
					
					effect = {	
					}
				}
			}
		}
		every_system = {
			limit = {
				owner = {
					is_same_value = root
				}
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_mining_station
					has_mining_station = no
				}
				create_mining_station = {
					owner = ROOT
				}				
			}
			every_system_planet = {
				limit = { 
					has_deposit_for = shipclass_research_station 
					has_research_station = no
				}
				create_research_station = {
					owner = ROOT
				}				
			}
		}	
		every_system_within_border = {
			random_system_planet = {
				create_fleet = {
					effect = {
						set_owner = event_target:fe_allied_rebel
						while = {
							count = 1
							create_ship = {
								name = random
								random_existing_design = titan
								graphical_culture = root
							}
						}
						while = {
							count = 8
							create_ship = {
								name = random
								random_existing_design = battleship
								graphical_culture = root
							}
						}
						while = {
							count = 12
							create_ship = {
								name = random
								random_existing_design = destroyer
								graphical_culture = root							
							}
						}
						set_location = {
							target = prev
							distance = 80
							angle = 120
						}
					}
				}				
			}
		}	
	}
}

country_event = {
	id = acot_startup.603
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_system = {
			limit = {
				has_star_flag = origin_fe_rebel_point
			}
			random_fleet_in_system = {
				limit = {
					is_ship_class = shipclass_starbase
				}
				set_owner = root
			}
		}
	}
}

### SUPPLY
fleet_event = {
	id = acot_startup.604
	title = "acot_startup.604.title"
	desc = "acot_startup.604.desc"
	picture = GFX_evt_star_chart
	location = FROM
	trackable = yes
	show_sound = event_yellow_alert
	
	is_triggered_only = yes
	
	trigger = {
		has_fleet_flag = acot_fe_supply_ship
		from = {
			NOT = {
				has_star_flag = origin_fe_rebel_point
			}
			exists = owner
			owner = {
				is_same_value = root.owner
			}
		}
	}

	immediate = {
		remove_fleet_flag = acot_fe_supply_ship
		random_country = {
			limit = {
				has_country_flag = fe_aggressor
			}
			save_event_target_as = fe_aggressor
		}
	}
	
	option = {
		name = "acot_startup.604.a"
		event_target:fe_aggressor = {
			add_resource = {
				energy = -50000
				minerals = -50000
				food = -50000
				consumer_goods = -50000
				alloys = -25000
				volatile_motes = -2500
				rare_crystals = -2500
				exotic_gases = -2500
				acot_sr_dark_energy = -5000
				sr_dark_matter = -5000
			}			
		}
		owner = {
			remove_point_of_interest = acot_origin_fe_rebel_pov.1
			add_resource = {
				energy = 100000
				minerals = 100000
				food = 100000
				consumer_goods = 100000
				alloys = 50000
				volatile_motes = 5000
				rare_crystals = 5000
				exotic_gases = 5000
				acot_sr_dark_energy = 10000
				sr_dark_matter = 10000
			}
		}
	}

}

### TECH
fleet_event = {
	id = acot_startup.605
	title = "acot_startup.605.title"
	desc = "acot_startup.605.desc"
	picture = GFX_evt_star_chart
	location = FROM
	trackable = yes
	show_sound = event_yellow_alert
	
	is_triggered_only = yes
	
	trigger = {
		has_fleet_flag = acot_fe_tech_ship
		from = {
			NOT = {
				has_star_flag = origin_fe_rebel_point
			}
			exists = owner
			owner = {
				is_same_value = root.owner
			}
		}
	}

	immediate = {
		remove_fleet_flag = acot_fe_tech_ship
		hidden_effect = {
			owner = {
				country_event = {
					id = acot_test_event.0
				}
				set_country_flag = hear_precursor_rumor			
			}
		}
	}
	
	
	option = {
		name = "acot_startup.605.a"
		owner = {
			remove_point_of_interest = acot_origin_fe_rebel_pov.2
			begin_event_chain = {
				event_chain = acot_alpha_tech_chain
			}	
			give_technology = { tech = tech_precursor_design }
			add_tech_progress = {
				tech = tech_precursor_design_engineering
				progress = 0.25
			}
			add_tech_progress = {
				tech = tech_precursor_design_history
				progress = 0.25
			}
			add_tech_progress = {
				tech = tech_precursor_design_physics
				progress = 0.25
			}
		}
	}

}

### REACTIVE
fleet_event = {
	id = acot_startup.606
	title = "acot_startup.606.title"
	desc = "acot_startup.606.desc"
	picture = GFX_evt_star_chart
	location = FROM
	trackable = yes
	show_sound = event_yellow_alert
	
	is_triggered_only = yes
	
	trigger = {
		has_fleet_flag = acot_fe_reactive_ship
		from = {
			NOT = {
				has_star_flag = origin_fe_rebel_point
			}
			exists = owner
			owner = {
				is_same_value = root.owner
			}
		}
	}

	immediate = {
		remove_fleet_flag = acot_fe_reactive_ship
		random_country = {
			limit = {
				has_country_flag = fe_aggressor
			}
			save_event_target_as = fe_aggressor
		}
		owner = {
			remove_point_of_interest = acot_origin_fe_rebel_pov.3
			capital_scope = {
				create_fleet = {
					settings = {
						uses_naval_capacity = no
					}
					effect = {
						set_owner = root.owner
						assign_leader = last_created_leader
						while = {
							count = 12
							create_rebel_fallen_empire_large_ship = yes
						}
						while = {
							count = 16
							create_rebel_fallen_empire_small_ship = yes
						}
						add_modifier = {
							modifier = acot_fleet_no_upkeep
						}
						set_location = {
							target = prev
							distance = 75
							angle = 60
						}
					}
				}
				create_fleet = {
					settings = {
						uses_naval_capacity = no
					}
					effect = {
						set_owner = root.owner
						assign_leader = last_created_leader
						while = {
							count = 12
							create_rebel_fallen_empire_large_ship = yes
						}
						while = {
							count = 16
							create_rebel_fallen_empire_small_ship = yes
						}
						add_modifier = {
							modifier = acot_fleet_no_upkeep
						}
						set_location = {
							target = prev
							distance = 50
							angle = 60
						}
					}
				}
				create_fleet = {
					settings = {
						uses_naval_capacity = no
						can_upgrade = no
						spawn_debris = no
						can_change_leader = no
					}
					effect = {
						set_owner = root.owner
						create_ship = {
							name = "Dalatros M4R"
							design = "NAME_ACOT_ANCIENT_BATTLESTATION"
							graphical_culture = acot_tuborek
							upgradable = no
						}
						add_modifier = {
							modifier = acot_old_shit
						}
						set_location = {
							target = prev
							distance = 50
							angle = 60
						}
					}
				}
				create_fleet = {
					settings = {
						uses_naval_capacity = no
					}
					effect = {
						set_owner = event_target:fe_allied_rebel
						assign_leader = last_created_leader
						while = {
							count = 12
							create_rebel_fallen_empire_large_ship = yes
						}
						while = {
							count = 16
							create_rebel_fallen_empire_small_ship = yes
						}
						add_modifier = {
							modifier = acot_fleet_no_upkeep
						}
						set_location = {
							target = prev
							distance = 50
							angle = random
						}
					}
				}
				create_fleet = {
					settings = {
						uses_naval_capacity = no
					}
					effect = {
						set_owner = event_target:fe_allied_rebel
						assign_leader = last_created_leader
						while = {
							count = 12
							create_rebel_fallen_empire_large_ship = yes
						}
						while = {
							count = 16
							create_rebel_fallen_empire_small_ship = yes
						}
						add_modifier = {
							modifier = acot_fleet_no_upkeep
						}
						set_location = {
							target = prev
							distance = 50
							angle = random
						}
					}
				}
			}
		}
	}
	
	option = {
		name = "acot_startup.606.a"
	}

}

### CFABRICAROT
fleet_event = {
	id = acot_startup.607
	title = "acot_startup.607.title"
	desc = "acot_startup.607.desc"
	picture = GFX_evt_star_chart
	location = FROM
	trackable = yes
	show_sound = event_yellow_alert
	
	is_triggered_only = yes
	
	trigger = {
		has_fleet_flag = acot_fe_transport_ship
		from = {
			NOT = {
				has_star_flag = origin_fe_rebel_point
			}
			exists = owner
			owner = {
				is_same_value = root.owner
			}
		}
	}

	immediate = {
		remove_fleet_flag = acot_fe_transport_ship
		owner = {
			remove_point_of_interest = acot_origin_fe_rebel_pov.4
			set_variable = {
				which = affluence_center_build_count
				value = 3
			}
			set_variable = {
				which = nourishment_center_build_count
				value = 3
			}
			set_variable = {
				which = dimensional_fabricator_build_count
				value = 3
			}
			set_variable = {
				which = class_4_singularity_build_count
				value = 3
			}
			set_variable = {
				which = nano_forge_build_count
				value = 3
			}
		}
	}
	
	option = {
		name = "acot_startup.607.a"
	}

}